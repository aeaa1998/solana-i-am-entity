{"version":3,"file":"js/Crear Credenciales.feda2ea5.js","mappings":"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","sources":["webpack://solana-i-am-entity/./src/views/credentials/CreateCredential.vue","webpack://solana-i-am-entity/./src/views/credentials/CreateCredential.vue?7596"],"sourcesContent":["<template>\n  <div>\n    <div class=\"text-3xl font-bold text-gray-900 tracking-wide\">Crear nueva credencial</div>\n    <hr class=\"mt-3 dark:border-primary-400 border-t-2 rounded mb-8\" />\n    <div class=\"flex flex-row items-start\">\n      <img class=\"hidden md:block md:w-1/3 w-1/2 aspect-square bg-cover bg-primary-50 border-primary-100 border-2 mr-4 rounded\" v-if=\"nftLogoPreview\" :src=\"nftLogoPreview\" />\n      <div v-else class=\"hidden md:w-1/3 w-1/2 aspect-square rounded bg-primary-50 mr-4 border-primary-100 border-2 text-sm p-2 text-center md:flex md:flex-col place-content-center\">\n        Preview de la imágen seleccionada\n      </div>\n      <div class=\"flex flex-col grow gap-y-4\">\n        <div class=\"flex flex-wrap gap-x-4 gap-y-6 items-center justify-center w-full\">\n          <img class=\"md:hidden h-36 w-36 bg-cover bg-primary-50 border-primary-100 border-2 rounded\" v-if=\"nftLogoPreview\" :src=\"nftLogoPreview\" />\n          <div v-else class=\"md:hidden h-36 w-36 rounded bg-primary-50 border-primary-100 border-2 text-sm justify-center items-center p-2 text-center flex flex-col place-content-center\">\n            Escoje una imágen\n          </div>\n          <v-file-input\n            :previewsImage=\"false\"\n            class=\"sm:w-full grow\"\n            accept=\"image/png, image/jpeg, image/jpg\"\n            name=\"nftLogo\"\n            label=\"Imágen de la credencial\"\n            rules=\"required|mimes:image/jpeg,image/jpg,image/png|size:2048\"\n          />\n        </div>\n        <v-input name=\"nftName\" label=\"Nombre de la credencial\" placeholder=\"Ingresa el nombre de la credencial\" rules=\"required|min:2|max:20\" />\n        <v-input name=\"nftSymbol\" label=\"Símbolo de la credencial\" placeholder=\"Ingresa el nombre de la credencial\" rules=\"required|min:2|max:10\" />\n        <v-text-area :rows=\"8\" name=\"nftDescription\" label=\"Descripción de la credencial\" placeholder=\"Ingresa la descripción de la credencial\" rules=\"required|min:8|max:56\" />\n        <v-checkbox name=\"expires\" label=\"Expira la credencial?\" />\n        <template v-if=\"values.expires\">\n          <div class=\"w-full flex flex-wrap\">\n            <v-select\n              wrapperClass=\"w-full md:w-1/3 px-0 md:pr-2\"\n              name=\"days\"\n              label=\"Días en los que expira\"\n              placeholder=\"Seleccione la cantidad de días\"\n              :options=\"timeOptions.days\"\n              :getOptionLabel=\"(option) => `${option} días`\"\n              rules=\"required\"\n            />\n            <v-select\n              wrapperClass=\"w-full md:w-1/3 px-0 md:px-2\"\n              name=\"months\"\n              label=\"Meses en los que expira\"\n              placeholder=\"Seleccione la cantidad de meses\"\n              :options=\"timeOptions.months\"\n              :getOptionLabel=\"(option) => `${option} meses`\"\n              rules=\"required\"\n            />\n            <v-select\n              wrapperClass=\"w-full md:w-1/3 px-0 md:pl-2\"\n              name=\"years\"\n              label=\"Años en los que expira\"\n              placeholder=\"Seleccione la cantidad de años\"\n              :options=\"timeOptions.years\"\n              :getOptionLabel=\"(option) => `${option} años`\"\n              rules=\"required\"\n            />\n          </div>\n        </template>\n\n        <v-v-select\n          label=\"Requisitos\"\n          placeholder=\"Selecciona las credenciales\"\n          :options=\"nfts\"\n          multiple\n          :getOptionLabel=\"(option) => option.name\"\n          :reduce=\"(nft) => nft.address.toBase58()\"\n          :loading=\"isLoadingNfts && nfts.length == 0\"\n          name=\"nftsToAdd\"\n        />\n\n        <div class=\"flex flex-row flex-wrap\">\n          <div class=\"sm:w-1/2 w-full p-1\">\n            <v-cancel-button :disabled=\"isCreating\" @click=\"$router.push('/credentials')\" class=\"h-10 w-full rounded-md\"> Atras </v-cancel-button>\n          </div>\n          <div class=\"sm:w-1/2 w-full p-1\">\n            <v-primary-button @click=\"createNft\" :disabled=\"!isValid || isCreating\" class=\"h-10 w-full rounded-md\" color=\"bg-green-400 hover:bg-green-500 focus:ring-green-800 active:bg-green-700\">\n              {{ !isCreating ? \"Confirmar\" : \"Cargando\" }}\n            </v-primary-button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { computed, onMounted, ref, watch } from \"vue\";\nimport VInput from \"@/components/VInput.vue\";\nimport { useForm } from \"vee-validate\";\nimport axios from \"axios\";\nimport { useAnchorWallet } from \"solana-wallets-vue\";\nimport { useStore } from \"vuex\";\nimport { useRoute, useRouter } from \"vue-router\";\n\nexport default {\n  components: { VInput },\n  setup() {\n    const timeOptions = {\n      days: [...Array(32).keys()],\n      months: [...Array(13).keys()],\n      years: [...Array(11).keys()],\n    };\n    const store = useStore();\n    const router = useRouter();\n    const isLoadingNfts = ref(false);\n    const isCreating = ref(false);\n\n    const { values, meta } = useForm();\n\n    //Computed properties\n    const isTimeStampsValid = computed(() => !values.expires || [values.days, values.months, values.years].some((a) => a > 0));\n    const timeStampsValue = computed(() => {\n      if (!values.expires) return null;\n      return {\n        years: values.years,\n        months: values.months,\n        days: values.days,\n      };\n    });\n    const isValid = computed(() => meta.value.valid && isTimeStampsValid.value);\n    // const isValid = computed(() => true);\n    const nftLogo = computed(() => values.nftLogo);\n    const nftName = computed(() => values.nftName);\n    const nftDescription = computed(() => values.nftDescription);\n    const nfts = computed(() => store.getters.nftsModels);\n    const nftLogoPreview = computed(() => {\n      try {\n        return URL.createObjectURL(nftLogo.value);\n      } catch (error) {\n        return null;\n      }\n    });\n\n    async function createNft() {\n      //Now we have to create the program\n      isCreating.value = true;\n      let body = { title: nftName.value, description: nftDescription.value, image: nftLogo.value, requisites: values.nftsToAdd ?? [], model: \"credential\", symbol: values.nftSymbol };\n      if (timeStampsValue.value) {\n        body.expiration = { ...timeStampsValue.value };\n      }\n      const created = await store.dispatch(\"createNft\", body);\n      isCreating.value = false;\n      //It was successfull\n      if (created) {\n        router.back();\n      }\n    }\n\n    async function fetchNfts() {\n      if (!nfts.value.length) {\n        isLoadingNfts.value = true;\n        await store.dispatch(\"getNftFromCreator\", true);\n        isLoadingNfts.value = false;\n      }\n    }\n\n    onMounted(() => {\n      fetchNfts();\n    });\n\n    return {\n      timeOptions,\n      isValid,\n      nftLogo,\n      nftLogoPreview,\n      nftName,\n      nftDescription,\n      createNft,\n      isCreating,\n      nfts,\n      isLoadingNfts,\n      values,\n    };\n  },\n};\n</script>","import { render } from \"./CreateCredential.vue?vue&type=template&id=5c86c50c\"\nimport script from \"./CreateCredential.vue?vue&type=script&lang=js\"\nexport * from \"./CreateCredential.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/augustoalonso/vue/solana-i-am-entity/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","src","nftLogoPreview","previewsImage","accept","name","label","rules","placeholder","rows","values","wrapperClass","options","timeOptions","days","getOptionLabel","option","months","years","nfts","multiple","reduce","nft","address","toBase58","loading","isLoadingNfts","length","disabled","isCreating","$router","push","createNft","isValid","color","components","VInput","setup","Array","keys","store","router","meta","isTimeStampsValid","expires","some","a","timeStampsValue","value","valid","nftLogo","nftName","nftDescription","getters","nftsModels","URL","createObjectURL","error","async","body","title","description","image","requisites","nftsToAdd","model","symbol","nftSymbol","expiration","created","dispatch","back","fetchNfts","__exports__","render"],"sourceRoot":""}