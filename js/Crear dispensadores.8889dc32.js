"use strict";(self["webpackChunksolana_i_am_entity"]=self["webpackChunksolana_i_am_entity"]||[]).push([[635],{78816:(e,a,r)=>{r.r(a),r.d(a,{default:()=>q});var s=r(66252),l=r(3577);const i=(0,s._)("div",{class:"text-3xl font-bold text-gray-900 tracking-wide"},"Crear dispensador",-1),t=(0,s._)("hr",{class:"mt-3 dark:border-primary-400 border-t-2 rounded mb-8"},null,-1),n={class:"flex flex-row items-start"},d=["src"],o={key:1,class:"hidden md:w-1/3 w-1/2 aspect-square rounded bg-primary-50 mr-4 border-primary-100 border-2 text-sm p-2 text-center sm:flex sm:flex-col place-content-center"},c={class:"flex flex-col grow gap-y-4"},u={class:"flex flex-wrap gap-x-4 gap-y-6 items-center justify-center w-full"},m=["src"],p={key:1,class:"sm:hidden h-36 w-36 rounded bg-primary-50 border-primary-100 border-2 text-sm justify-center items-center p-2 text-center flex flex-col place-content-center"},v={class:"w-full"},g={class:"flex flex-row flex-wrap"},f={class:"sm:w-1/2 w-full p-1"},b=(0,s.Uk)(" Atras "),w={class:"sm:w-1/2 w-full p-1"};function y(e,a,r,y,x,h){const _=(0,s.up)("input-label"),C=(0,s.up)("v-select"),k=(0,s.up)("v-input"),L=(0,s.up)("v-cancel-button"),P=(0,s.up)("v-primary-button");return(0,s.wg)(),(0,s.iD)("div",null,[i,t,(0,s._)("div",n,[y.nftLogoPreview?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"hidden sm:block md:w-1/3 w-1/2 aspect-square bg-cover bg-primary-50 border-primary-100 border-2 mr-4 rounded",src:y.nftLogoPreview},null,8,d)):((0,s.wg)(),(0,s.iD)("div",o," Preview de la colección seleccionada ")),(0,s._)("div",c,[(0,s._)("div",u,[y.nftLogoPreview?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"sm:hidden h-36 w-36 bg-cover bg-primary-50 border-primary-100 border-2 rounded",src:y.nftLogoPreview},null,8,m)):((0,s.wg)(),(0,s.iD)("div",p," Preview de la colección seleccionada ")),(0,s._)("div",v,[(0,s.Wm)(_,{class:"mb-3",text:"Credencial para dispensador"}),(0,s.Wm)(C,{placeholder:"Seleccionar credencial",options:y.nfts,reduce:e=>e,getOptionLabel:e=>e.name,getOptionKey:e=>e.metadataAddress?e.metadataAddress.toBase58():e.address.toBase58(),loading:y.isLoadingNfts&&0==y.nfts.length,modelValue:y.nftCollection,"onUpdate:modelValue":a[0]||(a[0]=e=>y.nftCollection=e)},null,8,["options","reduce","getOptionLabel","getOptionKey","loading","modelValue"])])]),(0,s.Wm)(k,{name:"itemsAvailable",label:"Número de items disponibles en este dispensador",placeholder:"Ingresa el número de items disponibles en el dispensador"}),(0,s.Wm)(k,{name:"price",label:"Precio de cada credencial",placeholder:"Ingresa el precio en sols para cada credencial"}),(0,s._)("div",g,[(0,s._)("div",f,[(0,s.Wm)(L,{disabled:y.isCreating,onClick:a[1]||(a[1]=a=>e.$router.back()),class:"h-10 w-full rounded-md"},{default:(0,s.w5)((()=>[b])),_:1},8,["disabled"])]),(0,s._)("div",w,[(0,s.Wm)(P,{onClick:y.createCandyMachine,disabled:!y.isValid||y.isCreating,class:"h-10 w-full rounded-md",color:"bg-green-400 hover:bg-green-500 focus:ring-green-800 active:bg-green-700"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(y.isCreating?"Cargando":"Confirmar"),1)])),_:1},8,["onClick","disabled"])])])])])])}var x=r(2262),h=r(33907),_=r(12954),C=r(63015),k=r(5594),L=r(33863),P=r(68893),A=r(22201),D=r(59917);const V={components:{InputLabel:k.Z},setup(){const{metaplex:e}=(0,C.cF)(),a=(0,x.iH)(null),r=(0,x.iH)(!1),l=(0,h.oR)(),i=(0,x.iH)(!1),t=(0,A.tv)(),n={itemsAvailable:"required|integer|min_value:1|max_value:100",price:"required|min_value:0.01"},{values:d,meta:o}=(0,_.cI)({validationSchema:n}),c=(0,s.Fl)((()=>a.value?a.value.json.image:null)),u=(0,s.Fl)((()=>l.getters.nftsModels)),m=(0,s.Fl)((()=>o.value.valid&&a.value));async function p(){r.value=!0,await l.dispatch("getNftFromCreator",!0),r.value=!1}const v=async()=>{i.value=!0;const r=a.value,s=await e.value.candyMachinesV2();try{const{data:e}=await _axios.post("/create/dispenser",{name:r.name,price:d.price,itemsAvailable:d.itemsAvailable,address:r.address,uri:r.uri}),a=await s.findByAddress({address:new D.nh(e.address)});l.commit(L.af,a),(0,P.h)({type:"success",title:"Se creo exitosamente!",text:"Dispensador creado exitosamente"}),t.push("/dispensers")}catch(n){console.error(n),(0,P.h)({type:"error",title:"Error al crear el dispensador 🍬",text:"Por favor prueba nuevamente crear el dispensador"})}i.value=!1};return(0,s.bv)((()=>{p()})),{nfts:u,isValid:m,nftLogoPreview:c,createCandyMachine:v,isCreating:i,isLoadingNfts:r,nftCollection:a}}};var W=r(83744);const F=(0,W.Z)(V,[["render",y]]),q=F}}]);
//# sourceMappingURL=Crear dispensadores.8889dc32.js.map